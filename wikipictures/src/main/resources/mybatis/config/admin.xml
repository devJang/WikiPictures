<?xml version="1.0" encoding="UTF-8"?>
<!-- Sql Mapper -->
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="admin">
<resultMap type="memberVO" id="memberRM">
		<result property="favoriteSpace" column="fav_space" />
	</resultMap>
	<resultMap type="reportVO" id="reportRM">
	<result property="reportNo" column="report_no"/>
	<result property="reportType" column="report_type"/>
	<result property="reportContent" column="report_content"/>
	<result property="reportDate" column="report_date"/>
	<result property="pictureVO.keyword" column="keyword"/>
	<result property="pictureVO.pictureDate" column="pic_date"/>
	</resultMap>
	<resultMap type="pictureVO" id="pictureRM">
	<result property="pictureDate" column="pic_date"/>
	<result property="authorComment" column="author_commnet"/>
	<result property="pictureSpace" column="pic_space"/>
	<result property="memberVO.id" column="id"/>
	<result property="rowNumber" column="rnum"/>
	</resultMap>
	<resultMap type="mypageVO" id="mypageRM">
	<result property="pictureVO.pictureDate" column="pic_date"/>
	<result property="memberVO.id" column="id"/>
	<result property="pictureVO.keyword" column="keyword"/>
	<result property="replyDate" column="reply_date"/>
	<result property="replyContent" column="reply_content"/>
	<result property="buyDate" column="buy_date"/>
	<result property="rowNumber" column="rnum"/>
	</resultMap>
 	 	<select id="memberlist" resultType="java.util.HashMap" >
 	select rnum, id, nickname, password, birth, fav_space from
 	 (select row_number() over(order by id desc) as rnum,id,nickname, password,
 	to_char(birth, 'yyyy.mm.dd')as birth, fav_space
 	 from member) where rnum between  #{startRowNumber} and #{endRowNumber}
 	</select> 
 	<select id="reportlist" resultMap="reportRM" resultType="reportVO">
	select rnum, report_no, pic_date,report_type, report_content, keyword, report_date from
 	 (select report_no,row_number() over(order by report_no desc) as rnum,pic_date,
 	 report_type,report_content, keyword , report_date
 	 from report) where rnum between  #{startRowNumber} and  #{endRowNumber} order by rnum desc
 	</select>
 	<select id="picturelist" resultMap="pictureRM" resultType="pictureVO">
	select id,pic_date,rnum,keyword,path,author_comment,hits,pic_space,category from 
	(select id, pic_date,row_number() over(order by keyword desc) as rnum,keyword,path,author_comment,hits,pic_space,category
	from picture) where rnum between #{startRowNumber} and #{endRowNumber} order by keyword desc
	</select>
	<select id="selllist" resultMap="mypageRM">
	 select rnum,id, pic_date, keyword, reply_date, reply_content, buy_date from
 	 (select row_number() over(order by id desc) as rnum,id,pic_date,
 	 keyword,reply_date,reply_content, buy_date
 	 from mypage) where rnum between  #{startRowNumber} and  #{endRowNumber} order by rnum desc
	</select>
 	<select id="memberTotalCount" resultType="int">
		select count(*) from	member
	</select>
		<select id="reportTotalCount" resultType="int">
		select count(*) from	report
	</select>
	<select id="sellTotalCount" resultType="int">
		select count(*) from mypage
	</select>
	
</mapper>










