<?xml version="1.0" encoding="UTF-8"?>
<!-- Sql Mapper -->
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="picture">
	
	<insert id="registerHashtag" parameterType="hashtagVO">
		MERGE INTO hashtag
		USING DUAL
		ON(hashtag_name=#{hashtagName})
		WHEN MATCHED THEN  
		   update set hashtag_count=hashtag_count+1
		WHEN NOT MATCHED THEN
		  insert(pic_date,keyword,hashtag_name) values(#{pictureVO.pictureDate}, #{pictureVO.keyword}, #{hashtagName})
	</insert>
	
	<insert id="registerPicture" parameterType="pictureVO">
		insert into PICTURE
		(pic_date, keyword, path, author_comment, pic_space, category, id)
		values
		(#{pictureDate}, #{keyword}, #{path}, #{authorComment},
		#{pictureSpace}, #{category}, #{memberVO.id})
	</insert>
	
	<select id="getPictures" resultType="pictureVO">
		select path
		from picture
	</select>
	
</mapper>










